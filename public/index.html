<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Bç«™è§†é¢‘æ”¶è—</title>
</head>
<body>

  <h1>ğŸ¬ æˆ‘çš„Bilibiliè§†é¢‘æ”¶è—</h1>

  <!-- åˆ†ç±»é€‰æ‹© -->
  <select id="category">
    <option value="å­¦ä¹ ">å­¦ä¹ </option>
    <option value="éŸ³ä¹">éŸ³ä¹</option>
    <option value="å¨±ä¹">å¨±ä¹</option>
  </select>

  <!-- è¾“å…¥æ¡† -->
  <input id="input" placeholder="ç²˜è´´Bç«™è§†é¢‘é“¾æ¥" style="width:300px;">
  <button onclick="addVideo()">æ·»åŠ </button>

  <hr>

  <!-- åˆ†ç±»ç­›é€‰æŒ‰é’® -->
  <button onclick="setCategory('å…¨éƒ¨')">å…¨éƒ¨</button>
  <button onclick="setCategory('å­¦ä¹ ')">å­¦ä¹ </button>
  <button onclick="setCategory('éŸ³ä¹')">éŸ³ä¹</button>
  <button onclick="setCategory('å¨±ä¹')">å¨±ä¹</button>

  <hr>

  <!-- è§†é¢‘å±•ç¤ºåŒºåŸŸ -->
  <div id="videos"></div>

  <script>
    let videos = JSON.parse(localStorage.getItem("videos")) || [];
    let currentCategory = "å…¨éƒ¨";

    function save() {
      localStorage.setItem("videos", JSON.stringify(videos));
    }

    function render() {
      const container = document.getElementById("videos");
      container.innerHTML = "";

      videos
        .filter(v => currentCategory === "å…¨éƒ¨" || v.category === currentCategory)
        .forEach(video => {
          container.innerHTML += `
            <div>
              <p>åˆ†ç±»: ${video.category}</p>
              <iframe 
                src="https://player.bilibili.com/player.html?bvid=${video.bvid}"
                width="500"
                height="300"
                frameborder="0"
                allowfullscreen>
              </iframe>
              <hr/>
            </div>
          `;
        });
    }

    function addVideo() {
      const url = document.getElementById("input").value;
      const category = document.getElementById("category").value;
      const match = url.match(/BV\w+/);

      if(match){
        videos.push({
          bvid: match[0],
          category: category
        });
        save();
        render();
        document.getElementById("input").value = "";
      } else {
        alert("æ— æ³•è¯†åˆ«BVå·");
      }
    }

    function setCategory(cat){
      currentCategory = cat;
      render();
    }

    render();
  </script>

</body>
</html>