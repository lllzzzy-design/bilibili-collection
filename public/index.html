<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Bç«™è§†é¢‘æ”¶è—</title>
</head>
<body>

  <h1>ğŸ¬ æˆ‘çš„Bilibiliè§†é¢‘æ”¶è—</h1>

  <input id="input" placeholder="ç²˜è´´Bç«™è§†é¢‘é“¾æ¥" style="width:300px;">
  <button onclick="addVideo()">æ·»åŠ </button>

  <hr>

  <div id="videos"></div>

  <script>
    let videos = JSON.parse(localStorage.getItem("videos")) || [];

    function save() {
      localStorage.setItem("videos", JSON.stringify(videos));
    }

    function render() {
      const container = document.getElementById("videos");
      container.innerHTML = "";

      videos.forEach(bvid => {
        container.innerHTML += `
          <iframe 
            src="https://player.bilibili.com/player.html?bvid=${bvid}"
            width="500"
            height="300"
            frameborder="0"
            allowfullscreen>
          </iframe>
          <hr/>
        `;
      });
    }

    function addVideo() {
      const url = document.getElementById("input").value;
      const match = url.match(/BV\w+/);

      if(match){
        videos.push(match[0]);
        save();
        render();
        document.getElementById("input").value = "";
      } else {
        alert("æ— æ³•è¯†åˆ«BVå·");
      }
    }

    render();
  </script>

</body>
</html>